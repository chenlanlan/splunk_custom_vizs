<form script="autodiscover_globe.js" stylesheet="dark.css">
  <label>WebGL Globe</label>
  <fieldset submitButton="false" autoRun="true"></fieldset>
  <row>
    <panel>
      <html>
        <h2>Options</h2>
        <table class="table table-striped table-bordered">
          <tbody>
            <tr>
              <td>
                <b>Name</b>
              </td>
              <td>
                <b>Type</b>
              </td>
              <td>
                <b>Default</b>
              </td>
              <td>
                <b>Description</b>
              </td>
            </tr>
            <tr>
              <td>
                <code>managerid</code>
              </td>
              <td>string</td>
              <td>null</td>
              <td>The search manager bound to the chart.</td>
            </tr>
            <tr>
              <td>
                <code>height</code>
              </td>
              <td>number</td>
              <td>800</td>
              <td>The height of the chart.</td>
            </tr>
            <tr>
              <td>
                <code>lat_field</code>
              </td>
              <td>string</td>
              <td>"latitude"</td>
              <td>The name of the latitude field.</td>
            </tr>
            <tr>
              <td>
                <code>lon_field</code>
              </td>
              <td>string</td>
              <td>"longitude"</td>
              <td>The name of the longitude field.</td>
            </tr>
            <tr>
              <td>
                <code>group_by_field</code>
              </td>
              <td>string</td>
              <td>null</td>
              <td>An optional third field that groups the data. Leave it null if there are no groupings. Ungrouped fields will show a gradient of color depending of the magnitude. Grouped data will be colored by groups.</td>
            </tr>
            <tr>
              <td>
                <code>spin_speed</code>
              </td>
              <td>number</td>
              <td>0</td>
              <td>The speed to auto-spin the globe. 0 means no auto-spin. A negative number means the earth spins in the opposite direction (as opposed to in reality).</td>
            </tr>
            <tr>
              <td>
                <code>world_image_path</code>
              </td>
              <td>string</td>
              <td>"app/custom_vizs/globe/world_black.jpg"</td>
              <td>The world image file to use for the globe. There are 3 provided maps: "world_black.jpg", "world_nature.jpg", and "world_night.jpg". Or inlcude your own image.</td>
            </tr>
            <tr>
              <td>
                <code>star_field</code>
              </td>
              <td>bool</td>
              <td>true</td>
              <td>Controls whether to show the star field in the background or not.</td>
            </tr>
          </tbody>
        </table>
      </html>
    </panel>
  </row>
  <row>
    <panel>
      <input type="dropdown" token="grouping" searchWhenChanged="true">
        <label>Grouping</label>
        <choice value="gender">By Gender</choice>
        <choice value="">No Grouping</choice>
        <default>gender</default>
      </input>
      <html>
        <h2>Locations Sample (from sample_geo.csv)</h2>
        <div id="globe_search" class="splunk-manager" data-require="splunkjs/mvc/searchmanager" data-options='{
          "search": "| inputlookup sample_geo.csv",
          "preview": true,
          "earliest_time": "0",
          "latest_time": "now"
        }'>
        </div>
        <div id="globe" class="splunk-view" data-require="app/custom_vizs/globe/globe" data-options='{
          "managerid": "globe_search",
          "world_image_path": "app/custom_vizs/globe/world_nature.jpg",
          "lat_field": "lat",
          "lon_field": "lon",
          "group_by_field": {
            "type": "token_safe",
            "value": "$$grouping$$"
          },
          "spin_speed": 1
        }'>
        </div>
      </html>
    </panel>
  </row>
</form>